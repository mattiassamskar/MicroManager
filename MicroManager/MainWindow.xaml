<Window x:Class="MicroManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wpf="clr-namespace:MicroManager"
        Title="MicroManager"
        Width="500"
        Height="600"
        Icon="MicroManager.ico"
        Style="{DynamicResource MyStyle}">

  <Window.Resources>
    <Style x:Key="MyStyle" TargetType="{x:Type Control}">
      <Setter Property="FontSize" Value="20" />
      <Setter Property="FontFamily" Value="Calibri" />
      <Setter Property="Background" Value="Silver" />
    </Style>
  </Window.Resources>

  <Grid FocusManager.FocusedElement="{Binding ElementName=SearchTextBox}">
    <Grid.RowDefinitions>
      <RowDefinition Height="40" />
      <RowDefinition Height="40" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*" />
      <ColumnDefinition Width="100" />
    </Grid.ColumnDefinitions>

    <TextBox Name="SearchTextBox"
             Grid.Row="0"
             Grid.Column="0"
             Margin="5"
             VerticalContentAlignment="Center"
             Text="{Binding SearchString,
                            UpdateSourceTrigger=PropertyChanged}">
      <TextBox.InputBindings>
        <KeyBinding Key="Enter" Command="{Binding SearchCommand}" />
      </TextBox.InputBindings>
    </TextBox>
    <Button Grid.Row="0"
            Grid.Column="1"
            Margin="5"
            Command="{Binding SearchCommand}"
            Content="Search" />

    <ListBox Grid.Row="2"
             Grid.Column="0"
             Margin="5"
             ItemsSource="{Binding ServiceInfoViewModels}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <CheckBox Content="{Binding Enabled}" />
            <Label Content="{Binding Name}" />
            <Label Content="{Binding State}" />
            <Button Command="{Binding StartServiceCommand}" Content="Start" />
            <Button Command="{Binding StopServiceCommand}" Content="Stop" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
  </Grid>
</Window>
